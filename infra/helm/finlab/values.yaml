namespace:
  create: false
registry: k3d-finlab-registry:5000

backend:
  image: finlab/backend
  tag: "0.2.4"
  replicas: 1
  port: 3000
  env:
    PORT: "3000"
    DB_MODE: "postgres"
    DATABASE_URL: ""
    DB_HOST: "postgres"
    DB_PORT: "5432"
    DB_USER: "finlab"
    DB_PASSWORD: "finlab"
    DB_NAME: "finlab"
    AUTH_SERVICE_URL: "http://auth-service:3001"
    AUDIO_SERVICE_URL: "http://audio-service:3002"
    ANALYTICS_SERVICE_URL: "http://analytics-service:3003"
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi
  hpa:
    minReplicas: 1
    maxReplicas: 3
    cpuUtilization: 70

frontend:
  image: finlab/frontend
  tag: "0.2.7"
  replicas: 2
  port: 80
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi

authService:
  image: finlab/auth-service
  tag: "0.1.0"
  replicas: 1
  port: 3001
  env:
    PORT: "3001"
  resources:
    requests:
      cpu: 80m
      memory: 96Mi
    limits:
      cpu: 300m
      memory: 192Mi
  hpa:
    minReplicas: 1
    maxReplicas: 4
    cpuUtilization: 70

audioService:
  image: finlab/audio-service
  tag: "0.1.0"
  replicas: 1
  port: 3002
  env:
    PORT: "3002"
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 400m
      memory: 256Mi
  hpa:
    minReplicas: 1
    maxReplicas: 6
    cpuUtilization: 70

analyticsService:
  image: finlab/analytics-service
  tag: "0.1.0"
  replicas: 1
  port: 3003
  env:
    PORT: "3003"
  resources:
    requests:
      cpu: 80m
      memory: 96Mi
    limits:
      cpu: 300m
      memory: 192Mi
  hpa:
    minReplicas: 1
    maxReplicas: 3
    cpuUtilization: 70

postgres:
  enabled: true
  image: postgres:16-alpine
  user: finlab
  password: finlab
  db: finlab
  port: 5432
  storage: 1Gi

hpa:
  enabled: true
  minReplicas: 2
  maxReplicas: 6
  cpuUtilization: 70
